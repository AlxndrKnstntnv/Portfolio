# Проект A/B-тестирования с применением метода CUPED

## Описание проекта

Этот проект посвящен анализу данных ритейл-сети с использованием A/B-тестирования для оценки влияния маркетингового вмешательства на поведение клиентов. В частности, мы рассматриваем изменение среднего объема трат в неделю среди клиентов после применения новой маркетинговой стратегии. Проект также включает применение метода **CUPED** (Controlled Pre-experiment Data), который позволяет улучшить точность теста за счет использования данных до вмешательства, что помогает снизить дисперсию в результатах.

## Цели проекта

- Провести A/B-тест для оценки изменений в поведении клиентов после маркетингового вмешательства.
- Применить метод CUPED для повышения статистической мощности теста и уменьшения шума в данных.
- Оценить значимость изменений в среднем объеме покупок клиентов.

## Данные

В проекте используются реальные данные по клиентам ритейл-сети. Набор данных, агрегированный для каждой недели, содержит следующую информацию:
- `client_id`: уникальный идентификатор клиента;
- `sum_purchase_0`: сумма покупок клиента за неделю до вмешательства;
- `sum_purchase_1`: сумма покупок клиента за неделю после вмешательства;
- `treatment`: индикатор принадлежности к контрольной (0) или экспериментальной (1) группе.

## Методология

### 1. **A/B-тестирование**

Мы проводим классический t-тест для проверки гипотезы о равенстве средних значений разницы в тратах между контрольной и экспериментальной группами:

- **Нулевая гипотеза (H₀)**: Средняя разница в тратах между контрольной и экспериментальной группами равна.
- **Альтернативная гипотеза (H₁)**: Средняя разница в тратах между контрольной и экспериментальной группами различается.

### 2. **Применение метода CUPED**

CUPED используется для учета данных до вмешательства и уменьшения дисперсии в результатах теста. Метод основывается на включении ковариаты (в данном случае объема покупок до эксперимента) и коррекции значений после вмешательства с ее помощью. Это повышает точность выводов и делает тест более чувствительным к реальным изменениям.

### Шаги применения CUPED:

1. Расчет средней суммы покупок до вмешательства для всей выборки.
2. Вычисление коэффициента корреляции β, который измеряет силу связи между покупками до и после эксперимента.
3. Корректировка итоговых значений с учетом полученной корреляции.
4. Проведение t-теста для скорректированных данных.

## Используемые библиотеки

- **Pandas** — для обработки данных.
- **SciPy** — для проведения статистических тестов.
- **NumPy** — для математических расчетов и работы с массивами данных.

## Результаты и выводы

После проведения A/B-теста и применения метода CUPED, были получены следующие результаты:

- Без использования CUPED тест показал мощность 0.3 для выборок размера 400 для 95-процентного уровня значимости.
- После применения CUPED наблюдается 0.95 для выборок размера 400 для 95-процентного уровня значимости, можно уменьшить выборку до 40 наблюдений с сохранением мощности на уровне 0.8.
- Для эффекта, выраженного в процентах (1 %) выборка больше: около 100 клиентов.

Таким образом, CUPED позволил уменьшить разброс в данных и выявить значимое изменение в поведении клиентов.

## Заключение

Этот проект демонстрирует, как метод A/B-тестирования в сочетании с использованием методов корректировки, таких как CUPED, может повысить точность выводов о влиянии изменений на клиентское поведение. Проект может быть полезен аналитикам данных для разработки методов повышения чувствительности экспериментов и улучшения интерпретации результатов.
